<#macro columnActionsPurchase item >
	<@showButton type="edit" title="module.stock.billetterie.list_purchase.modifyPurchase" href="jsp/admin/plugins/stock/modules/billetterie/SavePurchase.jsp?purchase_id=${item.id!}" />
	<@showButton type="export" title="module.stock.billetterie.list_purchase.linkPrintTicket" href="servlet/plugins/jasper/downloadFile?report_id=contremarque&report_type=pdf&value1=${item.id!}&value2=${item.userName!}" />
	<@showButton type="delete"  title="module.stock.billetterie.list_purchase.linkCancelPurchase" href="jsp/admin/plugins/stock/modules/billetterie/DeletePurchase.jsp?purchase_id=${item.id!}" />
	<@showButton type="send" title="module.stock.billetterie.list_purchase.linkNotifiyPurchase" href="jsp/admin/plugins/stock/modules/billetterie/NotifyPurchase.jsp?purchase_id=${item.id!}" />
</#macro>

<#macro columnNamePurchase item >
	<#if (item.offer.statut) == strStatutCancel!>
		<b style="color: red;">Annul√©</b> - 
	</#if>
	${(item.offer.product.name)!}
</#macro>

<#macro columnDatePurchase item >
	<a href="jsp/admin/plugins/stock/modules/billetterie/ManageOffers.jsp">
		${(item.offer.date)!} - ${(item.offer.hour)!}
	</a>
</#macro>

<#macro columnOfferTypePurchase item >
	${(item.offer.typeName)!}
</#macro>

<#macro columnAgentPurchase item >
	${item.firstNameAgent!} ${item.nameAgent!} <#if item.emailAgent??>&lt;${item.emailAgent}&gt;</#if>
</#macro>

<div class="row-fluid">
	<div class="span12">
		<fieldset>
			<legend>
				#i18n{module.stock.billetterie.list_purchase.title}
			</legend>
			<#list errors as error>
				${error!}
			</#list>
			<div class="row-fluid">
				<div class="span3 well">
					<form action="jsp/admin/plugins/stock/modules/billetterie/ManagePurchase.jsp" method="post">
						<input type="hidden" name="filter" value="${filter!}" />
						<p>
							<label for="filter_product">#i18n{module.stock.billetterie.list_offres.filter.product} : </label>
							<input class="span" type="text" name="productName" id="filter_product" value="${(filter.productName)!}" />
						</p>
						<p>
							<label for="filter_date_beginOffer">#i18n{module.stock.billetterie.list_purchase.filter.offerDate} : </label>
							<input class="span5" type="text" name="dateBeginOffer" id="filter_date_beginOffer" value="${(filter.dateBeginOffer?date)!}"/>
							#i18n{module.stock.billetterie.list_purchase.filter.offerDateEt}
							<input class="span5" type="text" name="dateEndOffer" id="filter_date_endOffer" value="${(filter.dateEndOffer?date)!}"/>
						</p>
						<p>
							<label for="filter_date_begin">#i18n{module.stock.billetterie.list_purchase.filter.purchaseDate} : </label>
							<input class="span5" type="text" name="dateBegin" id="filter_date_begin" value="${(filter.dateBegin?date)!}"/>
							#i18n{module.stock.billetterie.list_purchase.filter.purchaseDateEt}
							<input class="span5" type="text" name="dateEnd" id="filter_date_end" value="${(filter.dateEnd?date)!}"/>
						</p>
						<p>
							<label>#i18n{module.stock.billetterie.list_purchase.filter.offerType} : </label>
				        	<@comboWithParams additionalParameters="class='span'" name="idGenre" default_value="${filter.idGenre!}" items=offerGenre_list! />
						</p>
						<p>
							<label for="filter_userName">#i18n{module.stock.billetterie.list_purchase.filter.userName} : </label>
							<input class="span"  type="text" name="agentName" id="filter_userName" value="${(filter.agentName)!}" />
						</p>
						<@showSearchButton />
					</form>
				</div>
				<div class="span9">
					<@dataTable dataTableManager=dataTablePurchase />					
				</div>
			</div>
		</fieldset>
	</div>
</div>
<@getDatePickerRange idFieldFrom="filter_date_beginOffer" idFieldTo="filter_date_endOffer" language="${locale!}" />
<@getDatePickerRange idFieldFrom="filter_date_begin" idFieldTo="filter_date_end" language="${locale!}" />
<script src="js/jquery/plugins/ui/ui.datepicker-fr.js"></script>