<div class="row-fluid">
	<div class="span12">
		<fieldset>
			<legend>
				#i18n{module.stock.billetterie.list_purchase.title}
			</legend>
			<#list errors as error>
				${error!}
			</#list>
			<div class="row-fluid">
				<div class="span3 well">
					<form action="jsp/admin/plugins/stock/modules/billetterie/ManagePurchase.jsp" method="post">
						<input type="hidden" name="filter" value="${filter!}" />
						<p>
							<label for="filter_product">#i18n{module.stock.billetterie.list_offres.filter.product} : </label>
							<input class="span" type="text" name="productName" id="filter_product" value="${(filter.productName)!}" />
						</p>
						<p>
							<label for="filter_date_beginOffer">#i18n{module.stock.billetterie.list_purchase.filter.offerDate} : </label>
							<input class="span5" type="text" name="dateBeginOffer" id="filter_date_beginOffer" value="${(filter.dateBeginOffer?date)!}"/>
							#i18n{module.stock.billetterie.list_purchase.filter.offerDateEt}
							<input class="span5" type="text" name="dateEndOffer" id="filter_date_endOffer" value="${(filter.dateEndOffer?date)!}"/>
						</p>
						<p>
							<label for="filter_date_begin">#i18n{module.stock.billetterie.list_purchase.filter.purchaseDate} : </label>
							<input class="span5" type="text" name="dateBegin" id="filter_date_begin" value="${(filter.dateBegin?date)!}"/>
							#i18n{module.stock.billetterie.list_purchase.filter.purchaseDateEt}
							<input class="span5" type="text" name="dateEnd" id="filter_date_end" value="${(filter.dateEnd?date)!}"/>
						</p>
						<p>
							<label>#i18n{module.stock.billetterie.list_purchase.filter.offerType} : </label>
				        	<@comboWithParams additionalParameters="class='span'" name="idGenre" default_value="${filter.idGenre!}" items=offerGenre_list! />
						</p>
						<p>
							<label for="filter_userName">#i18n{module.stock.billetterie.list_purchase.filter.userName} : </label>
							<input class="span"  type="text" name="agentName" id="filter_userName" value="${(filter.agentName)!}" />
						</p>
						<@showSearchButton />
					</form>
				</div>
				<div class="span9">
					<@paginationAdmin paginator=paginator combo=1 />	
					<table class="table table-striped table-condensed">
						<tbody>
						    <tr>
					        	<th>#i18n{module.stock.billetterie.list_purchase.table.product}</th>
					        	<th>#i18n{module.stock.billetterie.list_purchase.table.dateOffer}</th>
					        	<th>#i18n{module.stock.billetterie.list_purchase.table.datePurchase}</th>
					        	<th>#i18n{module.stock.billetterie.list_purchase.table.typeOffer}</th>
					        	<th>#i18n{module.stock.billetterie.list_purchase.table.userName}</th>
					        	<th>#i18n{module.stock.billetterie.list_purchase.table.quantity}</th>
					        	<th>#i18n{module.stock.billetterie.list_purchase.table.actions}</th>
					    	</tr>
					    	<#if list_purchases?has_content>
							    <#list list_purchases as purchase>
								    <tr>
								    	<td>
								    		<#if (purchase.offer.statut) == strStatutCancel!>
								    			<b style="color: red;">Annul√©</b> - 
								    		</#if>
								    		${(purchase.offer.product.name)!}
								    	</td>
								    	<td>
								    		<a href="jsp/admin/plugins/stock/modules/billetterie/ManageOffers.jsp">
								    			${(purchase.offer.date)!} - ${(purchase.offer.hour)!}
								    		</a>
								    	</td>
								    	<td>
								    		${purchase.date!}
								    	</td>
								    	<td>
								    		${(purchase.offer.typeName)!}
								    	</td>
								    	<td>
								    		${purchase.firstNameAgent!} ${purchase.nameAgent!} <#if purchase.emailAgent??>&lt;${purchase.emailAgent}&gt;</#if>
								    	</td>
								    	<td>
								    		${purchase.quantity!}
								    	</td>
							        	<td>
							        		<@showButton type="edit" title="#i18n{module.stock.billetterie.list_purchase.modifyPurchase}" href="jsp/admin/plugins/stock/modules/billetterie/SavePurchase.jsp?purchase_id=${purchase.id!}" />
							        		<@showButton type="export" title="#i18n{module.stock.billetterie.list_purchase.linkPrintTicket}" href="servlet/plugins/jasper/downloadFile?report_id=contremarque&report_type=pdf&value1=${purchase.id!}&value2=${purchase.userName!}" />
							        		<@showButton type="delete"  title="#i18n{module.stock.billetterie.list_purchase.linkCancelPurchase}" href="jsp/admin/plugins/stock/modules/billetterie/DeletePurchase.jsp?purchase_id=${purchase.id!}" />
							        		<@showButton type="send" title="#i18n{module.stock.billetterie.list_purchase.linkNotifiyPurchase}" href="jsp/admin/plugins/stock/modules/billetterie/NotifyPurchase.jsp?purchase_id=${purchase.id!}" />
							            </td>
								    </tr>
							    </#list>
							<#else>
								<tr>
									<td colspan="7">
										#i18n{module.stock.billetterie.list_purchase.message.noResult}
									</td>
								</tr>
							</#if>
						</tbody>
					</table>
				</div>
			</div>
		</fieldset>
	</div>
</div>
<@getDatePickerRange idFieldFrom="filter_date_beginOffer" idFieldTo="filter_date_endOffer" language="${locale!}" />
<@getDatePickerRange idFieldFrom="filter_date_begin" idFieldTo="filter_date_end" language="${locale!}" />