<#setting url_escaping_charset='UTF-8'>
<div class="row-fluid">
	<div class="span12">
		<fieldset>
			<legend>
				#i18n{module.stock.billetterie.manage_product.title}
				<span class="pull-right spaced">
					<a class="btn btn-small btn-primary" href="jsp/admin/plugins/stock/modules/billetterie/ManageCategories.jsp" >
						#i18n{module.stock.billetterie.manage_product.buttonGererListeCategories}
					</a>
					<a class="btn btn-small btn-primary" href="jsp/admin/plugins/stock/modules/billetterie/SaveProduct.jsp?partnerId=${(filter.idProvider)!}&categoryId=${(filter.idCategory)!}" >
						#i18n{module.stock.billetterie.manage_product.buttonCreateProduct}
					</a>
				</span>
			</legend>
			<div class="row-fluid">
				<div class="span3 well">
					<form action="jsp/admin/plugins/stock/modules/billetterie/ManageProducts.jsp" method="post">
						<input type="hidden" name="filter" value="${filter!}" />
						<p>
							<label for="filter_name">#i18n{module.stock.billetterie.manage_product.filter.name} : </label>
							<input type="text" value="${filter.name!}" name="name" id="filter_name" />
						</p>
						<p>
							<label for="filter_salle">#i18n{module.stock.billetterie.manage_product.filter.salle} : </label>
				        	<@combo name="idProvider" default_value="${filter.idProvider!}" items=provider_list! />   
						</p>
						<p>
							<label for="filter_category">#i18n{module.stock.billetterie.manage_product.filter.category} : </label>
				        <@combo name="idCategory" default_value="${(filter.idCategory!)}" items=category_list! />     
						</p>
						<p>
							<label for="date_from">#i18n{module.stock.billetterie.manage_product.filter.date_from} : </label>
							<div style="float:left"><input type="text" name="dateFrom" id="date_from" size="10" maxlength="10" value="${filter.dateFrom!}"/></div>
							<label for="date_to" style="width:auto">#i18n{module.stock.billetterie.manage_product.filter.date_to} : </label>
							<input type="text" name="dateTo" id="date_to" size="10" maxlength="10" value="${filter.dateTo!}"/>
						</p>
						<@getDatePickerRange idFieldFrom="date_from" idFieldTo="date_to" language="fr_FR" />
						<p>
							<label for="show_aLaffiche"/>#i18n{module.stock.billetterie.manage_product.filter.alaffiche} :</label>
							<input type="checkbox" id="show_aLaffiche" name="aLaffiche" value="on" <#if filter.alaffiche?has_content && filter.alaffiche>checked="checked"</#if>/>
						</p>
						<@showSearchButton />
					</form>
				</div>
				<div class="span9">
					<@paginationAdmin paginator=paginator combo=1 />
					<table class="table table-striped table-condensed">
						<tbody>
						    <tr>
					        	<th>#i18n{module.stock.billetterie.manage_product.filter.name}</th>
					        	<th>#i18n{module.stock.billetterie.manage_product.filter.provider}</th>
					        	<th>#i18n{module.stock.billetterie.manage_product.filter.category}</th>
					        	<th>#i18n{module.stock.billetterie.manage_product.dates}</th>
					        	<th>#i18n{module.stock.billetterie.manage_product.actionsLabel}</th>
					    	</tr>
					    	<#if list_products?has_content>
						    <#list list_products as product>
							    <tr>
						        	<td><a title="#i18n{module.stock.billetterie.manage_product.linkModifyProduct}" href="jsp/admin/plugins/stock/modules/billetterie/SaveProduct.jsp?product_id=${product.id}"> ${product.name!}</a></td>
						        	<td>${product.providerName!}</td>
						        	<td>${product.categoryName!}</td>
						        	<td>Du ${product.startDate!} au ${product.endDate!}</td>
						        	<td>
						            	<a title="#i18n{module.stock.billetterie.manage_product.linkSeance}" href="jsp/admin/plugins/stock/modules/billetterie/ManageOffers.jsp?productId=${product.id!}"> 
						            		<img width="24px" src="images/admin/skin/actions/seance.png" alt="#i18n{module.stock.billetterie.manage_product.linkSeance}" />
						            	</a>
						        		<@showButton type="edit" title="#i18n{module.stock.billetterie.manage_product.linkModifyProduct}" href="jsp/admin/plugins/stock/modules/billetterie/SaveProduct.jsp?product_id=${product.id}" />
						            	<@showButton type="delete"  title="#i18n{module.stock.billetterie.manage_product.linkDeleteProduct}" href="jsp/admin/plugins/stock/modules/billetterie/DeleteProduct.jsp?product_id=${product.id}" />
						            </td>
							    </tr>
						    </#list>
						    <#else>
								<tr>
									<td colspan="7">
										Aucun résultat trouvé. Veuillez élargir votre recherche ou créer un spectacle.
									</td>
								</tr>
							</#if>
						</tbody>
					</table>
				</div>
			</div>
		</fieldset>
	</div>
</div>
